{% extends 'base.html' %}
{% load currency_filters %}

{% block title %}Order Placed Successfully - Tamraparni Ayurveda{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card text-center">
            <div class="card-body py-5">
                <div class="mb-4">
                    <i class="fas fa-check-circle text-success" style="font-size: 5rem;"></i>
                </div>
                
                <h2 class="text-success mb-3">Order Placed Successfully!</h2>
                
                <p class="lead mb-4">
                    Thank you for your order. Your order number is <strong>#{{ order.id }}</strong>
                </p>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>
                    We will contact you shortly to confirm your order. Please keep your phone available.
                </div>
                
                <div class="card bg-light mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Order Details</h5>
                        <table class="table table-borderless mb-0">
                            <tr>
                                <td><strong>Order ID:</strong></td>
                                <td>#{{ order.id }}</td>
                            </tr>
                            <tr>
                                <td><strong>Total Amount:</strong></td>
                                <td>{{ order.total_amount|rupees_simple }}</td>
                            </tr>
                            <tr>
                                <td><strong>Status:</strong></td>
                                <td><span class="badge bg-warning">{{ order.get_status_display }}</span></td>
                            </tr>
                            <tr>
                                <td><strong>Payment Method:</strong></td>
                                <td>Cash on Delivery (COD)</td>
                            </tr>
                        </table>
                    </div>
                </div>
                
                <h5 class="mb-3">Items Ordered</h5>
                <div class="table-responsive mb-4">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Quantity</th>
                                <th>Price</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in order.items.all %}
                            <tr>
                                <td>{{ item.medicine.name }}</td>
                                <td>{{ item.quantity }}</td>
                                <td>{{ item.price|rupees_simple }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                
                <div class="d-flex justify-content-center gap-3">
                    <a href="{% url 'home' %}" class="btn btn-primary">
                        <i class="fas fa-home me-2"></i>Continue Shopping
                    </a>
                    {% if user.is_authenticated %}
                    <a href="{% url 'order_history' %}" class="btn btn-outline-primary">
                        <i class="fas fa-list me-2"></i>View All Orders
                    </a>
                    {% else %}
                    <a href="{% url 'track_order' %}" class="btn btn-outline-primary">
                        <i class="fas fa-search me-2"></i>Track Order
                    </a>
                    <a href="{% url 'signup' %}" class="btn btn-outline-success">
                        <i class="fas fa-user-plus me-2"></i>Create Account
                    </a>
                    {% endif %}
                </div>
                
                {% if not user.is_authenticated %}
                <div class="alert alert-info mt-4">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>Save your Order ID:</strong> #{{ order.id }}<br>
                    You can track your order anytime using your Order ID and Phone Number at <a href="{% url 'track_order' %}">Track Order</a> page.
                </div>
                {% endif %}
                
                <div class="mt-4 text-muted">
                    <p><i class="fas fa-phone me-2"></i>For any queries, call us at: <a href="tel:+919710036499">+91 97100 36499</a></p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
