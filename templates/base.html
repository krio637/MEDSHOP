<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Tamraparni Ayurveda - Authentic Ayurvedic Medicines{% endblock %}</title>
    <meta name="description" content="Tamraparni Ayurveda - Your trusted source for authentic ayurvedic medicines and wellness products">
    <meta name="keywords" content="medicine, pharmacy, healthcare, online medicine store">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Lora:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    {% load static %}
    {% load currency_filters %}
    <link href="{% static 'css/responsive.css' %}?v=7.0" rel="stylesheet">
    <link href="{% static 'css/dropdown-fix.css' %}?v=1.0" rel="stylesheet">
    <link href="{% static 'css/gold-brown-theme.css' %}?v=4.0" rel="stylesheet">
    <link href="{% static 'css/medicine-cards-enhancement.css' %}?v=1.0" rel="stylesheet">
    <link href="{% static 'css/bootstrap-theme-override.css' %}?v=1.0" rel="stylesheet">
    <link href="{% static 'css/ui-enhancements.css' %}?v=1.0" rel="stylesheet">
    
    <!-- Global Font Style -->
    <style>
        body {
            font-family: 'Lora', Georgia, serif;
        }
        h1, h2, h3, h4, h5, h6, .navbar-brand {
            font-family: 'Playfair Display', Georgia, serif;
        }
        
        /* WhatsApp Floating Button */
        .whatsapp-float {
            position: fixed;
            bottom: 100px;
            right: 25px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: 0 4px 20px rgba(37, 211, 102, 0.4);
            z-index: 1000;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        .whatsapp-float:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(37, 211, 102, 0.6);
            color: white;
        }
        .whatsapp-float:hover .whatsapp-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateX(-10px);
        }
        .whatsapp-tooltip {
            position: absolute;
            right: 70px;
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            font-family: 'Lora', Georgia, serif;
        }
        .whatsapp-tooltip::after {
            content: '';
            position: absolute;
            right: -8px;
            top: 50%;
            transform: translateY(-50%);
            border: 4px solid transparent;
            border-left-color: #333;
        }
        @media (max-width: 768px) {
            .whatsapp-float {
                bottom: 90px;
                right: 15px;
                width: 55px;
                height: 55px;
                font-size: 28px;
            }
        }
    </style>
    
    <!-- Navbar & Profile dropdown styles - Gold Theme -->
    <style>
        /* Gold & Brown Theme Navbar */
        .navbar {
            padding: 0.5rem 0;
            background: linear-gradient(135deg, #FFD700 0%, #A0522D 100%) !important;
            box-shadow: 0 2px 10px rgba(139, 69, 19, 0.3);
            position: relative;
            z-index: 1050;
        }
        .navbar-brand {
            font-weight: 700;
            font-size: 1.3rem;
            color: #333 !important;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .navbar-brand i {
            font-size: 1.4rem;
            color: #8B4513;
        }
        /* Consistent Nav Links */
        .navbar-nav .nav-link {
            color: #333 !important;
            font-weight: 500;
            font-size: 0.95rem;
            padding: 0.5rem 0.75rem !important;
            border-radius: 6px;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            min-height: 40px;
        }
        .navbar-nav .nav-link i {
            font-size: 1rem;
            width: 18px;
            text-align: center;
        }
        .navbar-nav .nav-link:hover {
            background: rgba(255,255,255,0.4);
        }
        /* Right side nav items - consistent sizing */
        .navbar-nav.ms-auto .nav-item {
            display: flex;
            align-items: center;
        }
        .navbar-nav.ms-auto .nav-link {
            padding: 0.4rem 0.6rem !important;
            font-size: 0.9rem;
        }
        /* Search Bar */
        .navbar .form-control {
            border-radius: 20px 0 0 20px;
            border: 2px solid #8B4513;
            padding: 0.4rem 1rem;
            background: white;
            font-size: 0.9rem;
        }
        .navbar .form-control:focus {
            border-color: #654321;
            box-shadow: none;
        }
        .navbar .btn-search {
            border-radius: 0 20px 20px 0;
            border: 2px solid #8B4513;
            border-left: none;
            background: #8B4513;
            color: white;
            padding: 0.4rem 0.75rem;
        }
        .navbar .btn-search:hover {
            background: #654321;
        }
        /* Profile Icon */
        .profile-icon-circle {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #8B4513;
            color: #FFD700;
            font-size: 0.8rem;
            transition: all 0.2s ease;
        }
        .profile-icon-circle i {
            width: auto !important;
        }
        .profile-icon-circle:hover {
            background: #654321;
            transform: scale(1.05);
        }
        /* Logout button */
        .logout-btn {
            color: #333 !important;
        }
        .logout-btn:hover {
            background: rgba(220, 53, 69, 0.2) !important;
            color: #dc3545 !important;
        }
        /* Mobile */
        .navbar-toggler {
            border: 2px solid #8B4513;
            padding: 0.4rem 0.6rem;
            background: rgba(255,255,255,0.9);
        }
        .navbar-toggler:focus {
            box-shadow: 0 0 0 0.2rem rgba(139, 69, 19, 0.25);
        }
        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='%238B4513' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }
        
        /* Mobile Navbar Styles */
        @media (max-width: 991px) {
            .navbar {
                padding: 0.5rem 0;
            }
            .navbar-brand {
                font-size: 1.1rem;
            }
            .navbar-brand img {
                height: 35px !important;
            }
            .navbar-collapse {
                background: linear-gradient(135deg, #FFD700 0%, #D2B48C 100%);
                margin: 0.5rem -12px 0;
                padding: 1rem;
                border-radius: 0 0 12px 12px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            }
            .navbar-nav {
                padding: 0;
            }
            .navbar-nav .nav-link {
                padding: 0.6rem 1rem !important;
                border-radius: 8px;
                margin: 0.15rem 0;
                font-size: 0.95rem;
            }
            .navbar-nav .nav-link:hover {
                background: rgba(139, 69, 19, 0.15);
            }
            /* Right side nav - horizontal row on mobile */
            .navbar-nav.ms-auto {
                flex-direction: row !important;
                flex-wrap: wrap;
                justify-content: center;
                gap: 0.25rem;
                padding-top: 0.75rem;
                margin-top: 0.75rem;
                border-top: 1px solid rgba(139, 69, 19, 0.2);
            }
            .navbar-nav.ms-auto .nav-item {
                flex: 0 0 auto;
            }
            .navbar-nav.ms-auto .nav-link {
                padding: 0.5rem 0.6rem !important;
                font-size: 0.85rem;
                min-height: 36px;
            }
            .navbar-nav.ms-auto .nav-link i {
                font-size: 1rem;
            }
            .profile-icon-circle {
                width: 26px;
                height: 26px;
                font-size: 0.75rem;
            }
        }
        
        @media (max-width: 575px) {
            .navbar-brand {
                font-size: 0.95rem;
            }
            .navbar-brand img {
                height: 30px !important;
                margin-right: 5px !important;
            }
            .navbar-nav.ms-auto .nav-link {
                padding: 0.4rem 0.5rem !important;
            }
        }
        /* Profile Avatar Large */
        .profile-avatar-lg {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FFD700 0%, #8B4513 100%);
            color: white;
            font-size: 1.5rem;
        }
        .dropdown-menu .text-center.py-3 {
            background: linear-gradient(135deg, #FFFEF0 0%, #D2B48C 100%);
            padding: 1.25rem !important;
        }
        .dropdown-menu .text-primary {
            color: #8B4513 !important;
        }
        .dropdown-divider {
            margin: 0;
            border-color: #eee;
        }
        /* Cart Badge */
        .nav-link .badge {
            font-size: 0.65rem;
            padding: 0.25em 0.5em;
        }
    </style>
    
    <!-- Favicon -->
    <link rel="icon" href="{% static 'images/tamraparni-logo.jpg' %}" type="image/jpeg">
    <link rel="shortcut icon" href="{% static 'images/tamraparni-logo.jpg' %}" type="image/jpeg">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-primary">
        <div class="container">
            <a class="navbar-brand" href="{% url 'home' %}">
                <img src="{% static 'images/tamraparni-logo.jpg' %}" alt="Tamraparni Ayurveda Logo" style="height: 40px; width: auto; margin-right: 8px;">
                Tamraparni Ayurveda
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'home' %}">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'medicine_list' %}">Medicines</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'media' %}">
                            <i class="fas fa-play-circle"></i> Media
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'search' %}">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                </ul>
                
                <!-- Search Bar - Hidden on mobile, shown on larger screens -->
                <form class="d-none d-md-flex me-3" method="GET" action="{% url 'search' %}">
                    <div class="input-group" style="width: 250px;">
                        <input class="form-control" type="search" name="q" placeholder="Search medicines..." aria-label="Search">
                        <button class="btn btn-search" type="submit">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </form>
                
                <ul class="navbar-nav ms-auto flex-row flex-wrap">
                    {% if user.is_authenticated %}
                        {% if user.is_staff %}
                        <li class="nav-item">
                            <a class="nav-link px-2" href="{% url 'admin_dashboard' %}">
                                <i class="fas fa-tachometer-alt"></i> <span class="d-none d-lg-inline">Admin</span>
                            </a>
                        </li>
                        {% endif %}
                        <li class="nav-item">
                            <a class="nav-link position-relative px-2" href="{% url 'cart_detail' %}">
                                <i class="fas fa-shopping-cart"></i> <span class="d-none d-lg-inline">Cart</span>
                                {% if request.session.cart %}
                                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                                    {{ request.session.cart|length }}
                                    <span class="visually-hidden">items in cart</span>
                                </span>
                                {% endif %}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link px-2" href="{% url 'order_history' %}">
                                <i class="fas fa-history"></i> <span class="d-none d-lg-inline">Orders</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link px-2" href="{% url 'profile' %}" title="Profile">
                                <span class="profile-icon-circle">
                                    <i class="fas fa-user"></i>
                                </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link px-2 logout-btn" href="{% url 'logout' %}" title="Logout">
                                <i class="fas fa-sign-out-alt"></i> <span class="d-none d-lg-inline">Logout</span>
                            </a>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link px-2" href="{% url 'login' %}">
                                <i class="fas fa-sign-in-alt"></i> <span class="d-none d-lg-inline">Login</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link px-2" href="{% url 'signup' %}">
                                <i class="fas fa-user-plus"></i> <span class="d-none d-lg-inline">Sign Up</span>
                            </a>
                        </li>
                    {% endif %}
                </ul>
                
                <!-- Mobile Search Bar -->
                <form class="d-md-none mt-3" method="GET" action="{% url 'search' %}">
                    <div class="input-group">
                        <input class="form-control" type="search" name="q" placeholder="Search medicines..." aria-label="Search">
                        <button class="btn btn-primary" type="submit">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </nav>

    <main class="container my-4">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            {% endfor %}
        {% endif %}

        {% block content %}
        {% endblock %}
    </main>

    <footer class="footer-section">
        <div class="container">
            <!-- Main Footer Content -->
            <div class="row py-5">
                <!-- Company Info -->
                <div class="col-12 col-lg-3 mb-4 mb-lg-0">
                    <div class="footer-brand mb-3">
                        <img src="{% static 'images/tamraparni-logo.jpg' %}" alt="Tamraparni Ayurveda Logo" style="height: 50px; width: auto; border-radius: 8px;">
                    </div>
                    <h5 class="footer-title mb-3">Tamraparni Ayurveda</h5>
                    <p class="footer-desc mb-3">Your trusted source for authentic ayurvedic medicines and wellness products.</p>
                    <p class="mb-1"><small><strong>GSTIN:</strong> 07ALQPS4661J4ZB</small></p>
                    <!-- Social Media Icons -->
                    <h6 class="footer-heading mt-3">Follow Us</h6>
                    <div class="social-icons">
                        <a href="{{ site_settings.website_url|default:'/' }}" target="_blank" title="Website" class="{% if not site_settings.website_url %}text-muted{% endif %}"><i class="fas fa-globe"></i></a>
                        <a href="{{ site_settings.facebook_url|default:'#' }}" target="_blank" title="Facebook" class="{% if not site_settings.facebook_url %}text-muted{% endif %}"><i class="fab fa-facebook-f"></i></a>
                        <a href="{{ site_settings.instagram_url|default:'#' }}" target="_blank" title="Instagram" class="{% if not site_settings.instagram_url %}text-muted{% endif %}"><i class="fab fa-instagram"></i></a>
                        <a href="{{ site_settings.youtube_url|default:'#' }}" target="_blank" title="YouTube" class="{% if not site_settings.youtube_url %}text-muted{% endif %}"><i class="fab fa-youtube"></i></a>
                        <a href="{{ site_settings.twitter_url|default:'#' }}" target="_blank" title="Twitter/X" class="{% if not site_settings.twitter_url %}text-muted{% endif %}"><i class="fab fa-twitter"></i></a>
                        <a href="{{ site_settings.linkedin_url|default:'#' }}" target="_blank" title="LinkedIn" class="{% if not site_settings.linkedin_url %}text-muted{% endif %}"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://wa.me/{{ site_settings.whatsapp_number|whatsapp_number }}" target="_blank" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                
                <!-- About Us Links -->
                <div class="col-6 col-md-4 col-lg-2 mb-4 mb-lg-0">
                    <h6 class="footer-heading">About Us</h6>
                    <ul class="footer-links">
                        <li><a href="{% url 'about_us' %}">About Us</a></li>
                        <li><a href="{% url 'contact_us' %}">Contact Us</a></li>
                        <li><a href="{% url 'media' %}">Media</a></li>
                        <li><a href="{% url 'work_with_us' %}">Work with us</a></li>
                        <li><a href="{% url 'blog' %}">Blog</a></li>
                        <li><a href="{% url 'collaborate' %}">Collaborate / Become Affiliate</a></li>
                        <li><a href="{% url 'consult' %}">Consult</a></li>
                    </ul>
                </div>
                
                <!-- Your Account Links -->
                <div class="col-6 col-md-4 col-lg-2 mb-4 mb-lg-0">
                    <h6 class="footer-heading">Your Account</h6>
                    <ul class="footer-links">
                        <li><a href="{% url 'login' %}">Login</a></li>
                        <li><a href="{% url 'signup' %}">Create Account</a></li>
                        <li><a href="{% url 'track_order' %}">Track Order</a></li>
                    </ul>
                </div>
                
                <!-- Policies Links -->
                <div class="col-6 col-md-4 col-lg-2 mb-4 mb-lg-0">
                    <h6 class="footer-heading">Policies</h6>
                    <ul class="footer-links">
                        <li><a href="{% url 'terms_conditions' %}">Terms & Conditions</a></li>
                        <li><a href="{% url 'privacy_policy' %}">Privacy Policy</a></li>
                        <li><a href="{% url 'shipping_policy' %}">Shipping Policy</a></li>
                        <li><a href="{% url 'return_policy' %}">Return Policy</a></li>
                        <li><a href="{% url 'disclaimer' %}">Disclaimer</a></li>
                    </ul>
                </div>
                
                <!-- Contact Info -->
                <div class="col-6 col-md-6 col-lg-3">
                    <h6 class="footer-heading">Contact Us</h6>
                    <ul class="footer-contact">
                        <li>
                            <i class="fas fa-phone"></i>
                            <a href="tel:+919710036499">+91 97100 36499</a>
                        </li>
                        <li>
                            <i class="fas fa-envelope"></i>
                            <a href="mailto:tamraparniayurveda@gmail.com">tamraparniayurveda@gmail.com</a>
                        </li>
                        <li>
                            <i class="fas fa-clock"></i>
                            <span>Mon - Sat: 9:00 AM - 8:00 PM</span>
                        </li>
                        <li>
                            <i class="fas fa-map-marker-alt"></i>
                            <span>C12/1, Mansrover Garden,<br>Vishwakarma Chowk,<br>Opp. Mayapuri Metro Station,<br>New Delhi - 110015</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <!-- Footer Bottom -->
            <div class="footer-bottom py-3">
                <div class="row align-items-center">
                    <div class="col-12 text-center">
                        <p class="mb-0">&copy; 2025 Tamraparni Ayurveda. All rights reserved.</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Floating Button -->
    <a href="https://wa.me/{{ site_settings.whatsapp_number|whatsapp_number }}" 
       target="_blank" 
       class="whatsapp-float" 
       title="Chat on WhatsApp">
        <i class="fab fa-whatsapp"></i>
        <span class="whatsapp-tooltip">Chat with us!</span>
    </a>

    <!-- Chat Widget -->
    <div id="chatWidget" class="chat-widget">
        <button id="chatButton" class="chat-button" style="padding: 0; overflow: hidden;">
            <img src="{% static 'images/doctor-avatar.jpeg' %}" alt="Chat with Doctor" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
        </button>
        
        <div id="chatBox" class="chat-box" style="display: none;">
            <div class="chat-header">
                <div class="d-flex align-items-center">
                    <img src="{% static 'images/doctor-avatar.jpeg' %}" alt="Doctor" style="width: 35px; height: 35px; border-radius: 50%; margin-right: 10px; object-fit: cover;">
                    <div>
                        <h6 class="mb-0">Ayurveda Expert</h6>
                        <small class="text-white-50">Ask our health advisor!</small>
                    </div>
                </div>
                <button id="closeChat" class="btn-close btn-close-white"></button>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="chat-message bot-message">
                    <div class="message-avatar" style="padding: 0; overflow: hidden;">
                        <img src="{% static 'images/doctor-avatar.jpeg' %}" alt="Doctor" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                    </div>
                    <div class="message-content">
                        <p>Namaste! üôè Welcome to Tamraparni Ayurveda. I'm your Ayurveda health advisor. How can I help you today?</p>
                        <div class="quick-replies">
                            <button class="quick-reply" data-message="Tell me about your products">Products Info</button>
                            <button class="quick-reply" data-message="How do I place an order?">Place Order</button>
                            <button class="quick-reply" data-message="What are your delivery options?">Delivery Info</button>
                            <button class="quick-reply" data-message="I need help with my account">Account Help</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Type your message..." class="form-control">
                <button id="sendMessage" class="btn btn-primary">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript for enhanced UX -->
    <script>
        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Add loading state to buttons (excluding form submit buttons)
        document.querySelectorAll('.btn').forEach(button => {
            button.addEventListener('click', function(e) {
                // Skip if it's a form submit button - let the form submit normally
                if (this.type === 'submit') {
                    return; // Don't interfere with form submission
                }
                // Only add loading state to link buttons
                if (this.href && !this.href.includes('#')) {
                    const originalText = this.innerHTML;
                    this.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Loading...';
                    this.disabled = true;
                    
                    // Re-enable after 3 seconds (fallback)
                    setTimeout(() => {
                        this.innerHTML = originalText;
                        this.disabled = false;
                    }, 3000);
                }
            });
        });

        // Animate elements on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe all cards and animate elements
        document.addEventListener('DOMContentLoaded', function() {
            const animateElements = document.querySelectorAll('.animate-fade-in, .card, .feature-icon');
            animateElements.forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(el);
            });

            // Add hover effects to interactive elements
            document.querySelectorAll('.interactive-hover').forEach(element => {
                element.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-5px)';
                });
                
                element.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });

            // Counter animation for stats
            const counters = document.querySelectorAll('.stats-counter');
            counters.forEach(counter => {
                const target = parseInt(counter.textContent.replace(/\D/g, ''));
                const suffix = counter.textContent.replace(/\d/g, '');
                let current = 0;
                const increment = target / 100;
                
                const updateCounter = () => {
                    if (current < target) {
                        current += increment;
                        counter.textContent = Math.ceil(current) + suffix;
                        setTimeout(updateCounter, 20);
                    } else {
                        counter.textContent = target + suffix;
                    }
                };
                
                // Start animation when element is visible
                observer.observe(counter);
                counter.addEventListener('animationstart', updateCounter);
            });
        });

        // Add to cart with feedback
        document.querySelectorAll('a[href*="add-to-cart"]').forEach(link => {
            link.addEventListener('click', function(e) {
                // Add visual feedback
                this.innerHTML = '<i class="fas fa-check me-1"></i>Added!';
                this.classList.remove('btn-primary');
                this.classList.add('btn-success');
                
                // Show toast notification
                showToast('Medicine added to cart successfully!', 'success');
            });
        });

        // Toast notification function
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `alert alert-${type} position-fixed`;
            toast.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
            toast.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'} me-2"></i>
                ${message}
                <button type="button" class="btn-close" onclick="this.parentElement.remove()"></button>
            `;
            
            document.body.appendChild(toast);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.remove();
                }
            }, 3000);
        }

        // Search suggestions enhancement
        const searchInputs = document.querySelectorAll('input[type="search"]');
        searchInputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.style.transform = 'scale(1.02)';
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.style.transform = 'scale(1)';
            });
        });

        // Chat Widget Functionality
        const chatButton = document.getElementById('chatButton');
        const chatBox = document.getElementById('chatBox');
        const closeChat = document.getElementById('closeChat');
        const chatInput = document.getElementById('chatInput');
        const sendMessage = document.getElementById('sendMessage');
        const chatMessages = document.getElementById('chatMessages');

        // Toggle chat box
        chatButton.addEventListener('click', function() {
            chatBox.style.display = chatBox.style.display === 'none' ? 'flex' : 'none';
            if (chatBox.style.display === 'flex') {
                chatInput.focus();
            }
        });

        closeChat.addEventListener('click', function() {
            chatBox.style.display = 'none';
        });

        // Send message function
        function sendChatMessage() {
            const message = chatInput.value.trim();
            if (message) {
                // Add user message
                addMessage(message, 'user');
                chatInput.value = '';
                
                // Simulate bot response
                setTimeout(() => {
                    const response = getBotResponse(message);
                    addMessage(response, 'bot');
                }, 1000);
            }
        }

        // Add message to chat
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}-message`;
            
            if (sender === 'bot') {
                messageDiv.innerHTML = `
                    <div class="message-avatar" style="padding: 0; overflow: hidden;">
                        <img src="{% static 'images/doctor-avatar.jpeg' %}" alt="Doctor" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                    </div>
                    <div class="message-content">
                        <p>${text}</p>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="message-content">
                        <p>${text}</p>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Simple bot responses
        function getBotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('product') || lowerMessage.includes('medicine')) {
                return 'We offer authentic Ayurvedic medicines and wellness products. You can browse our collection by visiting the Medicines page. All our products are 100% natural and certified.';
            } else if (lowerMessage.includes('order') || lowerMessage.includes('buy')) {
                return 'To place an order: 1) Browse our medicines, 2) Add items to cart, 3) Proceed to checkout. You can create an account or checkout as a guest. We accept all major payment methods.';
            } else if (lowerMessage.includes('delivery') || lowerMessage.includes('shipping')) {
                return 'We offer fast delivery across India. Standard delivery takes 3-5 business days. Express delivery is available for urgent orders. Free shipping on orders above ‚Çπ500!';
            } else if (lowerMessage.includes('account') || lowerMessage.includes('login')) {
                return 'You can create an account by clicking "Sign Up" in the navigation menu. With an account, you can track orders, save addresses, and get personalized recommendations.';
            } else if (lowerMessage.includes('contact') || lowerMessage.includes('phone') || lowerMessage.includes('email')) {
                return 'You can reach us at:<br>üìû +91 97100 36499<br>üìß tamraparniayurveda@gmail.com<br>üïí Mon-Sat: 9:00 AM - 8:00 PM';
            } else if (lowerMessage.includes('hello') || lowerMessage.includes('hi')) {
                return 'Hello! How can I assist you with your Ayurvedic wellness journey today?';
            } else if (lowerMessage.includes('thank')) {
                return 'You\'re welcome! Feel free to ask if you have any other questions. üòä';
            } else {
                return 'Thank you for your message! For specific inquiries, please contact us at +91 97100 36499 or tamraparniayurveda@gmail.com. Our team will be happy to help!';
            }
        }

        // Send message on button click
        sendMessage.addEventListener('click', sendChatMessage);

        // Send message on Enter key
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendChatMessage();
            }
        });

        // Quick reply buttons
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('quick-reply')) {
                const message = e.target.getAttribute('data-message');
                chatInput.value = message;
                sendChatMessage();
            }
        });
    </script>
</body>
</html>
